个人物品分享系统 - 系统架构文档
========================================

整体系统架构
===========

                                ┌─────────────────────────┐
                                │      用户浏览器          │
                                │   (User Browser)       │
                                └─────────┬─────────────┘
                                          │ HTTP/HTTPS
                                          │ WebSocket
                                          ▼
                           ┌─────────────────────────────────┐
                           │        负载均衡器 / CDN         │
                           │   (Load Balancer / CDN)        │
                           │   - Nginx反向代理               │
                           │   - SSL终止                    │
                           │   - 静态资源缓存               │
                           └─────────────┬───────────────────┘
                                         │
                    ┌────────────────────┼────────────────────┐
                    │                    │                    │
                    ▼                    ▼                    ▼
        ┌─────────────────────┐ ┌─────────────────────┐ ┌─────────────────────┐
        │    前端应用         │ │    后端API          │ │    文件存储         │
        │  (Frontend App)    │ │  (Backend API)     │ │  (File Storage)    │
        │                    │ │                    │ │                    │
        │ React 18 + TypeScript │ Spring Boot 2.7    │ │ S3兼容存储服务     │
        │ - Ant Design UI     │ - Spring Security  │ │ - 图片文件存储      │
        │ - Redux Toolkit    │ - Spring Data JPA  │ │ - 静态资源托管      │
        │ - React Router     │ - MySQL数据库       │ │ - CDN分发           │
        │ - Axios HTTP客户端 │ - JWT认证           │ │                    │
        └─────────────────────┘ └─────────────────────┘ └─────────────────────┘

前端应用架构
===========

┌─────────────────────────────────────────────────────────────────┐
│                      前端应用架构                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   页面层        │  │   组件层        │  │   服务层        │  │
│  │  (Pages)       │  │ (Components)   │  │  (Services)    │  │
│  │                │  │                │  │                │  │
│  │ - 登录页面      │  │ - 布局组件      │  │ - API客户端    │  │
│  │ - 注册页面      │  │ - 物品卡片      │  │ - 用户服务     │  │
│  │ - 首页          │  │ - 导航组件      │  │ - 物品服务     │  │
│  │ - 物品详情      │  │ - 通用组件      │  │ - 消息服务     │  │
│  │ - 个人中心      │  │                │  │ - 收藏服务     │  │
│  │ - 消息中心      │  │                │  │ - 关注服务     │  │
│  │                │  │                │  │                │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   状态管理      │  │   路由管理      │  │   类型定义      │  │
│  │ (Redux Store)  │  │ (React Router)  │  │  (TypeScript)   │  │
│  │                │  │                │  │                │  │
│  │ - 用户状态      │  │ - 页面路由      │  │ - 接口类型      │  │
│  │ - 物品状态      │  │ - 路由守卫      │  │ - 实体类型      │  │
│  │ - 消息状态      │  │ - 参数传递      │  │ - DTO类型       │  │
│  │ - UI状态        │  │                │  │                │  │
│  │                │  │                │  │                │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

后端应用架构
===========

┌─────────────────────────────────────────────────────────────────┐
│                      后端应用架构                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   控制器层      │  │   服务层        │  │   数据访问层    │  │
│  │ (Controllers)  │  │  (Services)     │  │   (Repository)  │  │
│  │                │  │                │  │                │  │
│  │ - 用户控制器    │  │ - 用户服务      │  │ - 用户仓库      │  │
│  │ - 物品控制器    │  │ - 物品服务      │  │ - 物品仓库      │  │
│  │ - 消息控制器    │  │ - 消息服务      │  │ - 消息仓库      │  │
│  │ - 收藏控制器    │  │ - 收藏服务      │  │ - 收藏仓库      │  │
│  │ - 关注控制器    │  │ - 关注服务      │  │ - 关注仓库      │  │
│  │ - 分类控制器    │  │ - 分类服务      │  │ - 分类仓库      │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   实体层        │  │   DTO层         │  │   工具类        │  │
│  │  (Entities)    │  │    (DTOs)       │  │  (Utilities)   │  │
│  │                │  │                │  │                │  │
│  │ - 用户实体      │  │ - 用户登录DTO   │  │ - 密码工具      │  │
│  │ - 物品实体      │  │ - 用户注册DTO   │  │ - 令牌工具      │  │
│  │ - 消息实体      │  │ - 物品创建DTO   │  │ - 验证工具      │  │
│  │ - 收藏实体      │  │ - 消息创建DTO   │  │ - 时间工具      │  │
│  │ - 关注实体      │  │ - 响应DTO       │  │ - 密码生成器    │  │
│  │ - 分类实体      │  │                │  │                │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   配置层        │  │   监听器        │  │   安全层        │  │
│  │ (Configuration) │  │ (Listeners)     │  │ (Security)     │  │
│  │                │  │                │  │                │  │
│  │ - 应用配置      │  │ - 用户监听器    │  │ - Spring Security│  │
│  │ - 数据库配置    │  │ - 实体监听器    │  │ - JWT认证       │  │
│  │ - CORS配置      │  │                │  │ - 权限控制      │  │
│  │ - 安全配置      │  │                │  │ - 密码加密      │  │
│  │ - JPA配置       │  │                │  │                │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

数据库架构
=========

┌─────────────────────────────────────────────────────────────────┐
│                        MySQL数据库架构                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   用户模块      │  │   物品模块      │  │   社交模块      │  │
│  │                │  │                │  │                │  │
│  │ users          │  │ items           │  │ favorites       │  │
│  │ - id           │  │ - id            │  │ - id            │  │
│  │ - username     │  │ - title         │  │ - user_id       │  │
│  │ - email        │  │ - description   │  │ - item_id       │  │
│  │ - password     │  │ - price         │  │ - created_at    │  │
│  │ - avatar_url   │  │ - category_id   │  │                │  │
│  │ - created_at   │  │ - user_id       │  │ follows         │  │
│  │ - updated_at   │  │ - images        │  │ - id            │  │
│  │                │  │ - status        │  │ - follower_id   │  │
│  │ categories     │  │ - created_at    │  │ - following_id  │  │
│  │ - id           │  │ - updated_at    │  │ - created_at    │  │
│  │ - name         │  │                │  │                │  │
│  │ - description  │  │ images          │  │ messages        │  │
│  │ - created_at   │  │ - id            │  │ - id            │  │
│  │                │  │ - item_id       │  │ - sender_id     │  │
│  │                │  │ - url           │  │ - receiver_id   │  │
│  │                │  │ - alt_text      │  │ - content       │  │
│  │                │  │ - created_at    │  │ - read_status   │  │
│  │                │  │                │  │ - created_at    │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   系统模块      │  │   日志模块      │  │   历史记录模块  │  │
│  │                │  │                │  │                │  │
│  │ system_config  │  │ operation_logs  │  │ view_histories  │  │
│  │ - id           │  │ - id            │  │ - id            │  │
│  │ - config_key   │  │ - user_id       │  │ - user_id       │  │
│  │ - config_value │  │ - operation     │  │ - item_id       │  │
│  │ - description  │  │ - target_type   │  │ - viewed_at     │  │
│  │ - created_at   │  │ - target_id     │  │                │  │
│  │ - updated_at   │  │ - details       │  │                │  │
│  │                │  │ - ip_address    │  │                │  │
│  │                │  │ - created_at    │  │                │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

部署架构
========

┌─────────────────────────────────────────────────────────────────┐
│                        部署架构图                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│                    ┌─────────────────────┐                      │
│                    │     用户访问        │                      │
│                    │   (User Access)    │                      │
│                    └─────────┬───────────┘                      │
│                              │                                  │
│                    ┌─────────▼───────────┐                      │
│                    │   域名解析/CDN     │                      │
│                    │   (DNS/CDN)       │                      │
│                    └─────────┬───────────┘                      │
│                              │                                  │
│        ┌─────────────────────┼─────────────────────┐            │
│        │                     │                     │            │
│        ▼                     ▼                     ▼            │
│  ┌─────────────┐     ┌─────────────┐     ┌─────────────┐        │
│  │   前端部署   │     │   后端部署   │     │   数据库    │        │
│  │             │     │             │     │             │        │
│  │ - Zeabur   │     │ - Zeabur   │     │ - RDS MySQL │        │
│  │ - Nginx    │     │ - Spring   │     │ - 读写分离   │        │
│  │ - React    │     │   Boot     │     │ - 备份策略  │        │
│  │ - 静态资源 │     │ - Java 17  │     │ - 监控告警  │        │
│  │   缓存     │     │ - 自动扩缩 │     │             │        │
│  │             │     │   容       │     │             │        │
│  └─────────────┘     └─────────────┘     └─────────────┘        │
│                              │                                  │
│                              ▼                                  │
│                    ┌─────────────────────┐                      │
│                    │     文件存储        │                      │
│                    │   (File Storage)   │                      │
│                    │                     │                      │
│                    │ - S3/OSS          │                      │
│                    │ - 图片上传        │                      │
│                    │ - CDN分发         │                      │
│                    │ - 访问控制        │                      │
│                    └─────────────────────┘                      │
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   监控告警      │  │   日志收集      │  │   备份恢复      │  │
│  │                │  │                │  │                │  │
│  │ - 应用监控     │  │ - 应用日志     │  │ - 数据备份     │  │
│  │ - 性能监控     │  │ - 访问日志     │  │ - 配置备份     │  │
│  │ - 告警通知     │  │ - 错误日志     │  │ - 灾难恢复     │  │
│  │ - 健康检查     │  │ - 日志分析     │  │ - 版本控制     │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

技术栈总结
==========

前端技术栈:
- React 18.2.0 (用户界面框架)
- TypeScript 4.9.5 (类型安全)
- Ant Design 5.2.2 (UI组件库)
- Redux Toolkit 1.9.1 (状态管理)
- React Router 6.8.1 (路由管理)
- Axios 1.3.4 (HTTP客户端)
- Vite 4.0.4 (构建工具)

后端技术栈:
- Spring Boot 2.7.8 (应用框架)
- Spring Security 5.7.6 (安全框架)
- Spring Data JPA (数据访问)
- MySQL 8.0 (关系数据库)
- JWT (令牌认证)
- Maven 3.8.6 (构建工具)
- Java 17 (开发语言)

部署技术栈:
- Docker (容器化)
- Zeabur (云平台)
- Nginx (反向代理)
- S3/OSS (文件存储)
- CDN (内容分发)
- SSL/TLS (安全传输)